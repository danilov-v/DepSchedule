def jdk14Path = '/home/gonchar/Загрузки/jdk-14' //Перед запуском необходимо
def jdk12Path = '/usr/java/jdk-12.0.1'          //указать точные пути к jdk!

// Задача упаковывает проект вместе с jre для запуска на машине, на которой не установлена java
task pack(type: Exec, dependsOn: ['clean', ':backend:build']) {

    def buildPath = file("../build")

    commandLine "${jdk14Path}/bin/jpackage",
            "--runtime-image", "${jdk12Path}",
            "--input", "../build",
            "--output", "appimage",
            "--name", "Schedule",
            "--main-jar", "libs/backend.jar"
}

tasks.register("clean") {
    description = 'clean generated files'
    delete "$projectDir/appimage"
}