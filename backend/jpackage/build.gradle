def jdk14Path = '/home/gonchar/Загрузки/jdk-14' //Перед запуском необходимо
def jdk12Path = '/usr/java/jdk-12.0.1'          //указать точные пути к jdk!

task link(type: Exec, dependsOn: 'clean') {

    def buildPath = file("../build")

//    if (!buildPath.exists() || !buildPath.isDirectory())
//        throw new GradleException("directory '$buildPath' not found")

    commandLine "${jdk14Path}/bin/jpackage",
            "--runtime-image", "${jdk12Path}",
            "--input", "../build",
            "--output", "appimage",
            "--name", "Schedule",
            "--main-jar", "libs/backend.jar"
}

tasks.register("clean") {
    description = 'clean generated files'
    delete "$projectDir/appimage"
}