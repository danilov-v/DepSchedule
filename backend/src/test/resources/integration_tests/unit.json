{
  "scenarioName": "CRUD unit",
  "steps": [
    {
      "name": "POST_unit_parent1",
      "url": "/api/unit",
      "operation": "POST",
      "request": {
        "headers": {
          "Accept": "application/json;charset=UTF-8"
        },
        "body": {
          "title": "title_parent1"
        }
      },
      "assertions": {
        "status": 200,
        "body": {
          "title": "${$.POST_unit_parent1.request.body.title}",
          "parentId": "$NULL",
          "unitId": "$NOT.NULL"
        }
      }
    },

    {
      "name": "POST_unit_parent2",
      "url": "/api/unit",
      "operation": "POST",
      "request": {
        "headers": {
          "Accept": "application/json;charset=UTF-8"
        },
        "body": {
          "title": "title_parent2"
        }
      },
      "assertions": {
        "status": 200,
        "body": {
          "title": "${$.POST_unit_parent2.request.body.title}",
          "parentId": "$NULL",
          "unitId": "$NOT.NULL"
        }
      }
    },



    {
      "name": "POST_unit_child",
      "url": "/api/unit",
      "operation": "POST",
      "request": {
        "headers": {
          "Accept": "application/json;charset=UTF-8"
        },
        "body": {
          "title": "title_child",
          "parentId": "${$.POST_unit_parent1.response.body.unitId}"
        }
      },
      "assertions": {
        "status": 200,
        "body": {
          "title": "${$.POST_unit_child.request.body.title}",
          "parentId": "$EQ.${$.POST_unit_parent1.response.body.unitId}",
          "unitId": "$NOT.NULL"
        }
      }
    },



    {
      "name": "GET_unit",
      "url": "/api/unit",
      "operation": "GET",
      "request": {
      },
      "assertions": {
        "status": 200,
        "body": [
          {
            "title": "${$.POST_unit_parent1.response.body.title}",
            "unitId": "$EQ.${$.POST_unit_parent1.response.body.unitId}"
          },
          {
            "title": "${$.POST_unit_parent2.response.body.title}",
            "unitId": "$EQ.${$.POST_unit_parent2.response.body.unitId}"
          },
          {
            "title": "${$.POST_unit_child.response.body.title}",
            "parentId": "$EQ.${$.POST_unit_parent1.response.body.unitId}",
            "unitId": "$EQ.${$.POST_unit_child.response.body.unitId}"
          }
        ]
      }
    },



    {
      "name": "PUT_unit",
      "url": "/api/unit/${$.POST_unit_child.response.body.unitId}",
      "operation": "PUT",
      "request": {
        "headers": {
          "Accept": "application/json;charset=UTF-8"
        },
        "body": {
          "title": "title_child_changed",
          "parentId": "${$.POST_unit_parent2.response.body.unitId}"
        }
      },
      "assertions": {
        "status": 200,
        "body":
          {
            "title": "${$.PUT_unit.request.body.title}",
            "unitId": "$EQ.${$.POST_unit_child.response.body.unitId}",
            "parentId": "$EQ.${$.POST_unit_parent2.response.body.unitId}"
          }
      }
    },


    {
      "name": "DELETE_unit",
      "url": "/api/unit/${$.POST_unit_child.response.body.unitId}",
      "operation": "DELETE",
      "request": {
      },
      "assertions": {
        "status": 200
      }
    },


    {
      "name": "GET_afterDelete",
      "url": "/api/unit",
      "operation": "GET",
      "request": {
      },
      "assertions": {
        "status": 200,
        "body": [
          {
            "title": "${$.POST_unit_parent1.response.body.title}",
            "unitId": "$EQ.${$.POST_unit_parent1.response.body.unitId}"
          },
          {
            "title": "${$.POST_unit_parent2.response.body.title}",
            "unitId": "$EQ.${$.POST_unit_parent2.response.body.unitId}"
          }
        ]
      }
    }
  ]
}