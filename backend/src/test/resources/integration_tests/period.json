{
  "scenarioName": "Test Period API functionality",
  "steps": [
    {
      "name": "POST_period1",
      "url": "/api/period",
      "operation": "POST",

      "request": {
        "headers": {
          "Content-type": "application/json;charset=UTF-8"
        },
        "body": {
          "name": "Period1",
          "startDate": "2019-09-01",
          "endDate": "2019-09-06"
        }
      },

      "assertions": {
        "status": 200,
        "body": {
          "periodId": "$NOT.NULL",
          "name": "${$.POST_period1.request.body.name}",
          "startDate": "${$.POST_period1.request.body.startDate}",
          "endDate": "${$.POST_period1.request.body.endDate}"
        }
      }
    },

    {
      "name": "PUT_period1",
      "url": "/api/period/${$.POST_period1.response.body.periodId}",
      "operation": "PUT",

      "request": {
        "headers": {
          "Content-type": "application/json;charset=UTF-8"
        },
        "body": {
          "name": "Period1_updated"
        }
      },

      "assertions": {
        "status": 200,
        "body": {
          "periodId": "$EQ.${$.POST_period1.response.body.periodId}",
          "name": "${$.PUT_period1.request.body.name}",
          "startDate": "${$.POST_period1.request.body.startDate}",
          "endDate": "${$.POST_period1.request.body.endDate}"
        }
      }
    },

    {
      "name": "GET_periods",
      "url": "/api/period",
      "operation": "GET",

      "request": {
        "headers": {
          "Content-type": "application/json;charset=UTF-8"
        }
      },

      "assertions": {
        "status": 200,
        "body": [
          {
            "periodId": "$EQ.${$.POST_period1.response.body.periodId}",
            "name": "${$.PUT_period1.response.body.name}",
            "startDate": "${$.POST_period1.request.body.startDate}",
            "endDate": "${$.POST_period1.request.body.endDate}"
          }
        ]
      }
    },

    {
      "name": "DELETE_period1",
      "url": "/api/period/${$.POST_period1.response.body.periodId}",
      "operation": "DELETE",

      "request": {
        "headers": {
          "Content-type": "application/json;charset=UTF-8"
        }
      },

      "assertions": {
        "status": 200
      }
    },

    {
      "name": "GET_after_delete",
      "url": "/api/period",
      "operation": "GET",

      "request": {
        "headers": {
          "Content-type": "application/json;charset=UTF-8"
        }
      },

      "assertions": {
        "status": 200,
        "body": []
      }
    },

    {
      "name": "clearDataAfterTest",
      "url": "com.varb.schedule.integration.TestSqlExecutor",
      "operation": "executeSqlScript",
      "request": "db/scripts/zerocode/cleanup.sql",
      "assertions": {}
    }
  ]
}
